<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ScriptHub â€” Editor</title>

  <!-- Global and Editor-specific styles -->
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/editor.css" />
</head>
<body>

  <!-- Top Header -->
  <header id="topbar" role="banner">
    <div class="project-title">ScriptHub</div>

    <div class="topbar-right">
      <label class="file-label">
        <input type="file" id="fileInput" accept=".fountain,.txt" />
      </label>
      <button id="saveProject">Save</button>
      <button id="loadProject">Load</button>
    </div>
  </header>

  <!-- Main Layout (fills remaining height) -->
  <div id="layout">

    <!-- Left Toolbar -->
    <aside id="toolbar" role="navigation" aria-label="Editor toolbar">
      <button data-insert="scene">Scene</button>
      <button data-insert="action">Action</button>
      <button data-insert="dialogue">Dialogue</button>
      <button data-insert="transition">Transition</button>
    </aside>

    <!-- Workspace: editor area + resizer + side panel -->
    <main id="workspace" role="main">

      <!-- Fountain Textarea (editor) -->
      <section id="editorPanel" aria-label="Editor panel">
        <textarea id="editor" spellcheck="false" autocapitalize="off" autocomplete="off"></textarea>
      </section>

      <!-- Resizer sits between editorPanel and sidePanel -->
      <div id="resizer" title="Drag to resize panels" aria-hidden="false"></div>

      <!-- Right Sliding Tabs / Side Panel -->
      <section id="sidePanel" aria-label="Side panel">
        <nav id="tabs" role="tablist" aria-label="Side tabs">
          <button data-tab="preview" class="active" role="tab">Preview</button>
          <button data-tab="pages" role="tab">Pages</button>
          <button data-tab="versions" role="tab">Versions</button>
          <button data-tab="git" role="tab">Git Tree</button>
        </nav>

        <div id="tabContent">
          <div id="panel-preview" class="tab active" role="tabpanel">
            <div id="preview"></div>
          </div>

          <div id="panel-pages" class="tab" role="tabpanel">
            <ul id="pageList"></ul>
          </div>

          <div id="panel-versions" class="tab" role="tabpanel">
            <p>Version history coming soon.</p>
          </div>

          <div id="panel-git" class="tab" role="tabpanel">
            <p>Git Tree view coming soon.</p>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Fountain parser library (keep these before your module entry if app.js imports them) -->
  <script src="lib/fountain-parser.min.js"></script>
  <script src="lib/fountain.js"></script>

  <!--
    IMPORTANT:
    - Remove the plain <script src="js/editor.js"></script> unless you explicitly need it to run in the global scope.
    - Prefer importing modules from app.js (type="module") to avoid double init or race conditions.
  -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
