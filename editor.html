<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ScriptHub Editor</title>

<!-- ===== CSS ===== -->
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/editor.css">

<style>
/* Temporary fallback inline styling for safety â€” can remove once editor.css is filled */

body {
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    background: #f3f4f6;
    color: #111;
}

/* Layout wrapper */
.editor-layout {
    display: flex;
    height: 100vh;
}

/* Left toolbar */
#leftToolbar {
    width: 110px;
    background: #f8fafc;
    border-right: 1px solid #e5e7eb;
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

/* Editor center */
#editorArea {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 12px;
    overflow: hidden;
}

#editor {
    flex: 1;
    width: 100%;
    font-family: "Courier New", monospace;
    font-size: 18px;
    line-height: 1.7;
    padding: 16px;
    border-radius: 8px;
    border: 1px solid #d1d5db;
    resize: none;
}

/* Right panel + tabs */
#rightPanel {
    width: 380px;
    background: #ffffff;
    border-left: 1px solid #e5e7eb;
    display: flex;
    flex-direction: column;
}

#panelTabs {
    display: flex;
    border-bottom: 1px solid #e5e7eb;
}

.panel-tab {
    flex: 1;
    padding: 10px 8px;
    text-align: center;
    cursor: pointer;
    user-select: none;
    font-weight: 600;
    background: #f9fafb;
}

.panel-tab.active {
    background: #ffffff;
    border-bottom: 3px solid #0b5fff;
}

#panelContent {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
}

/* Preview styled page */
.page-snippet {
    padding: 8px 10px;
    border-bottom: 1px solid #e5e7eb;
    cursor: pointer;
}

.page-snippet.active {
    background: #eaf1ff;
}

.page {
    border: 1px solid #dfe6f0;
    background: #fff;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 6px;
}
</style>

</head>
<body>

<!-- ===================================================== -->
<!-- HEADER -->
<!-- ===================================================== -->
<header style="padding: 12px 16px; border-bottom: 1px solid #e5e7eb; background:#fff;">
    <div style="font-size:1.1rem; font-weight:700;">ScriptHub Editor (Modular Build)</div>
</header>

<!-- ===================================================== -->
<!-- MAIN LAYOUT -->
<!-- ===================================================== -->
<div class="editor-layout">

    <!-- LEFT TOOLBAR -->
    <aside id="leftToolbar" aria-label="Formatting toolbar">
        <button class="tool-btn" data-type="scene">INT./EXT.</button>
        <button class="tool-btn" data-type="int">INT.</button>
        <button class="tool-btn" data-type="ext">EXT.</button>
        <button class="tool-btn" data-type="character">CHAR</button>
        <button class="tool-btn" data-type="dialogue">DIALOGUE</button>
        <button class="tool-btn" data-type="paren">( )</button>
        <button class="tool-btn" data-type="transition">CUT TO:</button>

        <hr style="border:none; border-top:1px solid #e5e7eb; margin:12px 0;">

        <button class="tool-btn" id="titlePageBtn">TITLE PAGE</button>
        <button class="tool-btn" data-type="section">SECTION</button>

        <div style="margin-top:auto;">
            <button class="tool-btn" id="undoBtn">Undo</button>
            <button class="tool-btn" id="redoBtn">Redo</button>
        </div>
    </aside>

    <!-- CENTER EDITOR -->
    <main id="editorArea">
        <textarea id="editor" spellcheck="false"></textarea>
    </main>

    <!-- RIGHT PANEL WITH TABS -->
    <aside id="rightPanel">

        <!-- TAB BUTTONS -->
        <div id="panelTabs">
            <div class="panel-tab active" data-panel="preview">Preview</div>
            <div class="panel-tab" data-panel="pages">Pages</div>
            <div class="panel-tab" data-panel="versions">Versions</div>
            <div class="panel-tab" data-panel="git">Git Tree</div>
        </div>

        <!-- CONTENT WRAPPER -->
        <div id="panelContent">
            <div id="preview"></div>
            <div id="pagesPanel" style="display:none;"></div>
            <div id="versionsPanel" style="display:none;">(versions coming later)</div>
            <div id="gitPanel" style="display:none;">(Git tree visualization coming later)</div>
        </div>
    </aside>

</div>

<!-- ===================================================== -->
<!-- JAVASCRIPT MODULE LOADING -->
<!-- ===================================================== -->

<!-- Fountain parser -->
<script src="lib/fountain-parser.min.js"></script>
<script src="js/fountain.js"></script>

<!-- Core -->
<script src="js/core/state.js"></script>
<script src="js/core/parser.js"></script>
<script src="js/core/preview.js"></script>
<script src="js/core/storage.js"></script>
<script src="js/core/projects.js"></script>

<!-- UI -->
<script src="js/ui/ui-editor.js"></script>
<script src="js/ui/ui-toolbar.js"></script>
<script src="js/ui/ui-tabs.js"></script>
<script src="js/ui/ui-search.js"></script>
<script src="js/ui/ui-navigation.js"></script>
<script src="js/ui/ui-titlepage.js"></script>
<script src="js/ui/ui-resize.js"></script>

<!-- App initializer -->
<script src="js/app.js"></script>

</body>
</html>
